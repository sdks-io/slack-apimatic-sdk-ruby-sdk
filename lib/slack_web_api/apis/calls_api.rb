# slack_web_api
#
# This file was automatically generated by APIMATIC v3.0 (
# https://www.apimatic.io ).

module SlackWebApi
  # CallsApi
  class CallsApi < BaseApi
    # Registers a new Call.
    # @param [String] token Required parameter: Authentication token. Requires
    # scope: `calls:write`
    # @param [String] external_unique_id Required parameter: An ID supplied by
    # the 3rd-party Call provider. It must be unique across all Calls from that
    # service.
    # @param [String] join_url Required parameter: The URL required for a client
    # to join the Call.
    # @param [String] external_display_id Optional parameter: An optional,
    # human-readable ID supplied by the 3rd-party Call provider. If supplied,
    # this ID will be displayed in the Call object.
    # @param [String] desktop_app_join_url Optional parameter: When supplied,
    # available Slack clients will attempt to directly launch the 3rd-party Call
    # with this URL.
    # @param [Integer] date_start Optional parameter: Call start time in UTC
    # UNIX timestamp format
    # @param [String] title Optional parameter: The name of the Call.
    # @param [String] created_by Optional parameter: The valid Slack user ID of
    # the user who created this Call. When this method is called with a user
    # token, the `created_by` field is optional and defaults to the authed user
    # of the token. Otherwise, the field is required.
    # @param [String] users Optional parameter: The list of users to register as
    # participants in the Call. [Read more on how to specify users
    # here](/apis/calls#users).
    # @return [ApiResponse] Complete http response with raw body and status code.
    def calls_add(token,
                  external_unique_id,
                  join_url,
                  external_display_id: nil,
                  desktop_app_join_url: nil,
                  date_start: nil,
                  title: nil,
                  created_by: nil,
                  users: nil)
      @api_call
        .request(new_request_builder(HttpMethodEnum::POST,
                                     '/calls.add',
                                     Server::DEFAULT)
                   .header_param(new_parameter(token, key: 'token')
                                  .is_required(true))
                   .form_param(new_parameter(external_unique_id, key: 'external_unique_id')
                                .is_required(true))
                   .form_param(new_parameter(join_url, key: 'join_url')
                                .is_required(true))
                   .form_param(new_parameter(external_display_id, key: 'external_display_id'))
                   .form_param(new_parameter(desktop_app_join_url, key: 'desktop_app_join_url'))
                   .form_param(new_parameter(date_start, key: 'date_start'))
                   .form_param(new_parameter(title, key: 'title'))
                   .form_param(new_parameter(created_by, key: 'created_by'))
                   .form_param(new_parameter(users, key: 'users'))
                   .header_param(new_parameter('application/x-www-form-urlencoded', key: 'content-type'))
                   .header_param(new_parameter('application/json', key: 'accept'))
                   .auth(Single.new('slackAuth')))
        .response(new_response_handler
                    .deserializer(APIHelper.method(:custom_type_deserializer))
                    .deserialize_into(DefaultSuccessTemplate.method(:from_hash))
                    .is_api_response(true)
                    .local_error('default',
                                 'Typical error response',
                                 DefaultErrorTemplateException))
        .execute
    end

    # Ends a Call.
    # @param [String] token Required parameter: Authentication token. Requires
    # scope: `calls:write`
    # @param [String] id Required parameter: `id` returned when registering the
    # call using the [`calls.add`](/methods/calls.add) method.
    # @param [Integer] duration Optional parameter: Call duration in seconds
    # @return [ApiResponse] Complete http response with raw body and status code.
    def calls_end(token,
                  id,
                  duration: nil)
      @api_call
        .request(new_request_builder(HttpMethodEnum::POST,
                                     '/calls.end',
                                     Server::DEFAULT)
                   .header_param(new_parameter(token, key: 'token')
                                  .is_required(true))
                   .form_param(new_parameter(id, key: 'id')
                                .is_required(true))
                   .form_param(new_parameter(duration, key: 'duration'))
                   .header_param(new_parameter('application/x-www-form-urlencoded', key: 'content-type'))
                   .header_param(new_parameter('application/json', key: 'accept'))
                   .auth(Single.new('slackAuth')))
        .response(new_response_handler
                    .deserializer(APIHelper.method(:custom_type_deserializer))
                    .deserialize_into(DefaultSuccessTemplate.method(:from_hash))
                    .is_api_response(true)
                    .local_error('default',
                                 'Typical error response',
                                 DefaultErrorTemplateException))
        .execute
    end

    # Returns information about a Call.
    # @param [String] token Required parameter: Authentication token. Requires
    # scope: `calls:read`
    # @param [String] id Required parameter: `id` of the Call returned by the
    # [`calls.add`](/methods/calls.add) method.
    # @return [ApiResponse] Complete http response with raw body and status code.
    def calls_info(token,
                   id)
      @api_call
        .request(new_request_builder(HttpMethodEnum::GET,
                                     '/calls.info',
                                     Server::DEFAULT)
                   .header_param(new_parameter(token, key: 'token')
                                  .is_required(true))
                   .query_param(new_parameter(id, key: 'id')
                                 .is_required(true))
                   .header_param(new_parameter('application/x-www-form-urlencoded', key: 'Content-Type'))
                   .header_param(new_parameter('application/json', key: 'accept'))
                   .auth(Single.new('slackAuth')))
        .response(new_response_handler
                    .deserializer(APIHelper.method(:custom_type_deserializer))
                    .deserialize_into(DefaultSuccessTemplate.method(:from_hash))
                    .is_api_response(true)
                    .local_error('default',
                                 'Typical error response',
                                 DefaultErrorTemplateException))
        .execute
    end

    # Updates information about a Call.
    # @param [String] token Required parameter: Authentication token. Requires
    # scope: `calls:write`
    # @param [String] id Required parameter: `id` returned by the
    # [`calls.add`](/methods/calls.add) method.
    # @param [String] title Optional parameter: The name of the Call.
    # @param [String] join_url Optional parameter: The URL required for a client
    # to join the Call.
    # @param [String] desktop_app_join_url Optional parameter: When supplied,
    # available Slack clients will attempt to directly launch the 3rd-party Call
    # with this URL.
    # @return [ApiResponse] Complete http response with raw body and status code.
    def calls_update(token,
                     id,
                     title: nil,
                     join_url: nil,
                     desktop_app_join_url: nil)
      @api_call
        .request(new_request_builder(HttpMethodEnum::POST,
                                     '/calls.update',
                                     Server::DEFAULT)
                   .header_param(new_parameter(token, key: 'token')
                                  .is_required(true))
                   .form_param(new_parameter(id, key: 'id')
                                .is_required(true))
                   .form_param(new_parameter(title, key: 'title'))
                   .form_param(new_parameter(join_url, key: 'join_url'))
                   .form_param(new_parameter(desktop_app_join_url, key: 'desktop_app_join_url'))
                   .header_param(new_parameter('application/x-www-form-urlencoded', key: 'content-type'))
                   .header_param(new_parameter('application/json', key: 'accept'))
                   .auth(Single.new('slackAuth')))
        .response(new_response_handler
                    .deserializer(APIHelper.method(:custom_type_deserializer))
                    .deserialize_into(DefaultSuccessTemplate.method(:from_hash))
                    .is_api_response(true)
                    .local_error('default',
                                 'Typical error response',
                                 DefaultErrorTemplateException))
        .execute
    end
  end
end
