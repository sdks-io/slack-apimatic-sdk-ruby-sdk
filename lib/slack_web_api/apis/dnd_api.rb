# slack_web_api
#
# This file was automatically generated by APIMATIC v3.0 (
# https://www.apimatic.io ).

module SlackWebApi
  # DndApi
  class DndApi < BaseApi
    # Ends the current user's Do Not Disturb session immediately.
    # @param [String] token Required parameter: Authentication token. Requires
    # scope: `dnd:write`
    # @return [ApiResponse] Complete http response with raw body and status code.
    def dnd_end_dnd(token)
      @api_call
        .request(new_request_builder(HttpMethodEnum::POST,
                                     '/dnd.endDnd',
                                     Server::DEFAULT)
                   .header_param(new_parameter(token, key: 'token')
                                  .is_required(true))
                   .header_param(new_parameter('application/x-www-form-urlencoded', key: 'Content-Type'))
                   .header_param(new_parameter('application/json', key: 'accept'))
                   .auth(Single.new('slackAuth')))
        .response(new_response_handler
                    .deserializer(APIHelper.method(:custom_type_deserializer))
                    .deserialize_into(DndEndDndSchema.method(:from_hash))
                    .is_api_response(true)
                    .local_error('default',
                                 'Typical error response',
                                 DndEndDndErrorSchemaException))
        .execute
    end

    # Ends the current user's snooze mode immediately.
    # @param [String] token Required parameter: Authentication token. Requires
    # scope: `dnd:write`
    # @return [ApiResponse] Complete http response with raw body and status code.
    def dnd_end_snooze(token)
      @api_call
        .request(new_request_builder(HttpMethodEnum::POST,
                                     '/dnd.endSnooze',
                                     Server::DEFAULT)
                   .header_param(new_parameter(token, key: 'token')
                                  .is_required(true))
                   .header_param(new_parameter('application/x-www-form-urlencoded', key: 'Content-Type'))
                   .header_param(new_parameter('application/json', key: 'accept'))
                   .auth(Single.new('slackAuth')))
        .response(new_response_handler
                    .deserializer(APIHelper.method(:custom_type_deserializer))
                    .deserialize_into(DndEndSnoozeSchema.method(:from_hash))
                    .is_api_response(true)
                    .local_error('default',
                                 'Typical error response',
                                 DndEndSnoozeErrorSchemaException))
        .execute
    end

    # Retrieves a user's current Do Not Disturb status.
    # @param [String] token Optional parameter: Authentication token. Requires
    # scope: `dnd:read`
    # @param [String] user Optional parameter: User to fetch status for
    # (defaults to current user)
    # @return [ApiResponse] Complete http response with raw body and status code.
    def dnd_info(token: nil,
                 user: nil)
      @api_call
        .request(new_request_builder(HttpMethodEnum::GET,
                                     '/dnd.info',
                                     Server::DEFAULT)
                   .header_param(new_parameter('application/x-www-form-urlencoded', key: 'Content-Type'))
                   .query_param(new_parameter(token, key: 'token'))
                   .query_param(new_parameter(user, key: 'user'))
                   .header_param(new_parameter('application/json', key: 'accept'))
                   .auth(Single.new('slackAuth')))
        .response(new_response_handler
                    .deserializer(APIHelper.method(:custom_type_deserializer))
                    .deserialize_into(DndInfoSchema.method(:from_hash))
                    .is_api_response(true)
                    .local_error('default',
                                 'Typical error response',
                                 DndInfoErrorSchemaException))
        .execute
    end

    # Turns on Do Not Disturb mode for the current user, or changes its
    # duration.
    # @param [String] token Required parameter: Authentication token. Requires
    # scope: `dnd:write`
    # @param [String] num_minutes Required parameter: Number of minutes, from
    # now, to snooze until.
    # @return [ApiResponse] Complete http response with raw body and status code.
    def dnd_set_snooze(token,
                       num_minutes)
      @api_call
        .request(new_request_builder(HttpMethodEnum::POST,
                                     '/dnd.setSnooze',
                                     Server::DEFAULT)
                   .form_param(new_parameter(token, key: 'token')
                                .is_required(true))
                   .form_param(new_parameter(num_minutes, key: 'num_minutes')
                                .is_required(true))
                   .header_param(new_parameter('application/x-www-form-urlencoded', key: 'content-type'))
                   .header_param(new_parameter('application/json', key: 'accept'))
                   .auth(Single.new('slackAuth')))
        .response(new_response_handler
                    .deserializer(APIHelper.method(:custom_type_deserializer))
                    .deserialize_into(DndSetSnoozeSchema.method(:from_hash))
                    .is_api_response(true)
                    .local_error('default',
                                 'Typical error response',
                                 DndSetSnoozeErrorSchemaException))
        .execute
    end

    # Retrieves the Do Not Disturb status for up to 50 users on a team.
    # @param [String] token Optional parameter: Authentication token. Requires
    # scope: `dnd:read`
    # @param [String] users Optional parameter: Comma-separated list of users to
    # fetch Do Not Disturb status for
    # @return [ApiResponse] Complete http response with raw body and status code.
    def dnd_team_info(token: nil,
                      users: nil)
      @api_call
        .request(new_request_builder(HttpMethodEnum::GET,
                                     '/dnd.teamInfo',
                                     Server::DEFAULT)
                   .header_param(new_parameter('application/x-www-form-urlencoded', key: 'Content-Type'))
                   .query_param(new_parameter(token, key: 'token'))
                   .query_param(new_parameter(users, key: 'users'))
                   .header_param(new_parameter('application/json', key: 'accept'))
                   .auth(Single.new('slackAuth')))
        .response(new_response_handler
                    .deserializer(APIHelper.method(:custom_type_deserializer))
                    .deserialize_into(DefaultSuccessTemplate.method(:from_hash))
                    .is_api_response(true)
                    .local_error('default',
                                 'Typical error response',
                                 DefaultErrorTemplateException))
        .execute
    end
  end
end
