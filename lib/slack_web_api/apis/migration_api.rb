# slack_web_api
#
# This file was automatically generated by APIMATIC v3.0 (
# https://www.apimatic.io ).

module SlackWebApi
  # MigrationApi
  class MigrationApi < BaseApi
    # For Enterprise Grid workspaces, map local user IDs to global user IDs
    # @param [String] token Required parameter: Authentication token. Requires
    # scope: `tokens.basic`
    # @param [String] users Required parameter: A comma-separated list of user
    # ids, up to 400 per request
    # @param [String] team_id Optional parameter: Specify team_id starts with
    # `T` in case of Org Token
    # @param [TrueClass | FalseClass] to_old Optional parameter: Specify `true`
    # to convert `W` global user IDs to workspace-specific `U` IDs. Defaults to
    # `false`.
    # @return [ApiResponse] Complete http response with raw body and status code.
    def migration_exchange(token,
                           users,
                           team_id: nil,
                           to_old: nil)
      @api_call
        .request(new_request_builder(HttpMethodEnum::GET,
                                     '/migration.exchange',
                                     Server::DEFAULT)
                   .query_param(new_parameter(token, key: 'token')
                                 .is_required(true))
                   .query_param(new_parameter(users, key: 'users')
                                 .is_required(true))
                   .header_param(new_parameter('application/x-www-form-urlencoded', key: 'Content-Type'))
                   .query_param(new_parameter(team_id, key: 'team_id'))
                   .query_param(new_parameter(to_old, key: 'to_old'))
                   .header_param(new_parameter('application/json', key: 'accept'))
                   .auth(Single.new('slackAuth')))
        .response(new_response_handler
                    .deserializer(APIHelper.method(:custom_type_deserializer))
                    .deserialize_into(MigrationExchangeSuccessSchema.method(:from_hash))
                    .is_api_response(true)
                    .local_error('default',
                                 'Typical error response when there are no mappings to provide',
                                 MigrationExchangeErrorSchemaException))
        .execute
    end
  end
end
